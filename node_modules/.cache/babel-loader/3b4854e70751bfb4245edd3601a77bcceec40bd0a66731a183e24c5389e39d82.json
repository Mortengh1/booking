{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _readOnlyError from\"/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/node_modules/@babel/runtime/helpers/esm/readOnlyError.js\";import React from\"react\";import{useRef,useState,useEffect}from\"react\";import{format}from\"date-fns\";import axios from\"../api/axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function BookingCard(_ref){var booking=_ref.booking;var userId=localStorage.getItem(\"userId\");var DELETE_URL=\"https://skole.mortengh.dk/PHP/deleteBooking.php\";var bookingId=booking.id;var dateTime=booking.date+\" \"+booking.time;var bookingTime=new Date(dateTime);if(typeof bookingTime===\"string\"){if(bookingTime.length<=10){bookingTime.replace(/\\./g,\"-\"),_readOnlyError(\"bookingTime\");}}var formattedDate=format(bookingTime,\"dd/M/yyyy\");var formattedTime=format(bookingTime,\"H:mm\");var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),errMsg=_useState2[0],setErrMsg=_useState2[1];function deleteBooking(){return _deleteBooking.apply(this,arguments);}function _deleteBooking(){_deleteBooking=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var confirmDelete;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:confirmDelete=window.confirm(\"Vil du annullere bookingen hos \".concat(booking.resName,\" d. \").concat(formattedDate,\" kl. \").concat(formattedTime,\"?\"));if(confirmDelete){axios.post(DELETE_URL,JSON.stringify({userId:userId,bookingId:bookingId})).then(function(result){if(result.data.status==\"invalid\"){alert(result.data.errorMessage);}else{window.location.reload();alert(\"Bookingen slettet\");}});}case 2:case\"end\":return _context.stop();}}},_callee);}));return _deleteBooking.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"article\",{className:\"BookingCard\",children:[/*#__PURE__*/_jsx(\"img\",{src:booking.img,alt:booking.resName}),/*#__PURE__*/_jsxs(\"div\",{className:\"TextContainer\",children:[/*#__PURE__*/_jsx(\"h2\",{children:booking.resName}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Dato: \",formattedDate]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Kl.: \",formattedTime]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Antal personer: \",booking.numbOfPeople]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-delete\",onClick:deleteBooking,children:\"Annuller booking\"})]})]});}","map":{"version":3,"names":["React","useRef","useState","useEffect","format","axios","BookingCard","booking","userId","localStorage","getItem","DELETE_URL","bookingId","id","dateTime","date","time","bookingTime","Date","length","replace","formattedDate","formattedTime","errMsg","setErrMsg","deleteBooking","confirmDelete","window","confirm","resName","post","JSON","stringify","then","result","data","status","alert","errorMessage","location","reload","img","numbOfPeople"],"sources":["/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/src/components/BookingCard.js"],"sourcesContent":["import React from \"react\";\nimport { useRef, useState, useEffect } from \"react\";\nimport { format } from \"date-fns\";\nimport axios from \"../api/axios\";\nexport default function BookingCard({ booking }) {\n  const userId = localStorage.getItem(\"userId\");\n  const DELETE_URL = \"https://skole.mortengh.dk/PHP/deleteBooking.php\";\n  const bookingId = booking.id;\n  const dateTime = booking.date + \" \" + booking.time;\n  const bookingTime = new Date(dateTime);\n  if (typeof bookingTime === \"string\") {\n    if (bookingTime.length <= 10) {\n      bookingTime = bookingTime.replace(/\\./g, \"-\");\n    }\n  }\n  let formattedDate = format(bookingTime, \"dd/M/yyyy\");\n  let formattedTime = format(bookingTime, \"H:mm\");\n\n  const [errMsg, setErrMsg] = useState(\"\");\n\n  async function deleteBooking() {\n    const confirmDelete = window.confirm(\n      `Vil du annullere bookingen hos ${booking.resName} d. ${formattedDate} kl. ${formattedTime}?`\n    );\n    if (confirmDelete) {\n      axios\n        .post(\n          DELETE_URL,\n          JSON.stringify({\n            userId,\n            bookingId,\n          })\n        )\n        .then((result) => {\n          if (result.data.status == \"invalid\") {\n            alert(result.data.errorMessage);\n          } else {\n            window.location.reload();\n            alert(\"Bookingen slettet\");\n          }\n        });\n    }\n  }\n\n  return (\n    <article className=\"BookingCard\">\n      <img src={booking.img} alt={booking.resName} />\n      <div className=\"TextContainer\">\n        <h2>{booking.resName}</h2>\n        <p>Dato: {formattedDate}</p>\n        <p>Kl.: {formattedTime}</p>\n        <p>Antal personer: {booking.numbOfPeople}</p>\n        <button className=\"btn btn-delete\" onClick={deleteBooking}>\n          Annuller booking\n        </button>\n      </div>\n    </article>\n  );\n}\n"],"mappings":"wlBAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,MAAM,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACnD,OAASC,MAAM,KAAQ,UAAU,CACjC,MAAOC,MAAK,KAAM,cAAc,CAAC,wFACjC,cAAe,SAASC,YAAW,MAAc,IAAXC,QAAO,MAAPA,OAAO,CAC3C,GAAMC,OAAM,CAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAC7C,GAAMC,WAAU,CAAG,iDAAiD,CACpE,GAAMC,UAAS,CAAGL,OAAO,CAACM,EAAE,CAC5B,GAAMC,SAAQ,CAAGP,OAAO,CAACQ,IAAI,CAAG,GAAG,CAAGR,OAAO,CAACS,IAAI,CAClD,GAAMC,YAAW,CAAG,GAAIC,KAAI,CAACJ,QAAQ,CAAC,CACtC,GAAI,MAAOG,YAAW,GAAK,QAAQ,CAAE,CACnC,GAAIA,WAAW,CAACE,MAAM,EAAI,EAAE,CAAE,CACdF,WAAW,CAACG,OAAO,CAAC,KAAK,CAAE,GAAG,CAAC,+BAC/C,CACF,CACA,GAAIC,cAAa,CAAGjB,MAAM,CAACa,WAAW,CAAE,WAAW,CAAC,CACpD,GAAIK,cAAa,CAAGlB,MAAM,CAACa,WAAW,CAAE,MAAM,CAAC,CAE/C,cAA4Bf,QAAQ,CAAC,EAAE,CAAC,wCAAjCqB,MAAM,eAAEC,SAAS,eAAiB,QAE1BC,cAAa,mJAA5B,uJACQC,aAAa,CAAGC,MAAM,CAACC,OAAO,0CACArB,OAAO,CAACsB,OAAO,gBAAOR,aAAa,iBAAQC,aAAa,MAC3F,CACD,GAAII,aAAa,CAAE,CACjBrB,KAAK,CACFyB,IAAI,CACHnB,UAAU,CACVoB,IAAI,CAACC,SAAS,CAAC,CACbxB,MAAM,CAANA,MAAM,CACNI,SAAS,CAATA,SACF,CAAC,CAAC,CACH,CACAqB,IAAI,CAAC,SAACC,MAAM,CAAK,CAChB,GAAIA,MAAM,CAACC,IAAI,CAACC,MAAM,EAAI,SAAS,CAAE,CACnCC,KAAK,CAACH,MAAM,CAACC,IAAI,CAACG,YAAY,CAAC,CACjC,CAAC,IAAM,CACLX,MAAM,CAACY,QAAQ,CAACC,MAAM,EAAE,CACxBH,KAAK,CAAC,mBAAmB,CAAC,CAC5B,CACF,CAAC,CAAC,CACN,CAAC,sDACF,gDAED,mBACE,iBAAS,SAAS,CAAC,aAAa,wBAC9B,YAAK,GAAG,CAAE9B,OAAO,CAACkC,GAAI,CAAC,GAAG,CAAElC,OAAO,CAACsB,OAAQ,EAAG,cAC/C,aAAK,SAAS,CAAC,eAAe,wBAC5B,oBAAKtB,OAAO,CAACsB,OAAO,EAAM,cAC1B,8BAAUR,aAAa,GAAK,cAC5B,6BAASC,aAAa,GAAK,cAC3B,wCAAoBf,OAAO,CAACmC,YAAY,GAAK,cAC7C,eAAQ,SAAS,CAAC,gBAAgB,CAAC,OAAO,CAAEjB,aAAc,8BAEjD,GACL,GACE,CAEd"},"metadata":{},"sourceType":"module","externalDependencies":[]}