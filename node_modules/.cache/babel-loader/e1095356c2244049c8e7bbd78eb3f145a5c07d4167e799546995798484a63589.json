{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{useRef,useState,useEffect}from\"react\";import{format}from\"date-fns\";import axios from\"../api/axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function BookingCard(_ref){var booking=_ref.booking;//Gets the user id from localStorage\nvar userId=localStorage.getItem(\"userId\");//The url to the php file that deletes bookings\nvar DELETE_URL=\"https://skole.mortengh.dk/PHP/deleteBooking.php\";var bookingId=booking.id;var dateTime=booking.date+\"T\"+booking.time;var bookingTime=new Date(dateTime);var current=new Date();var currentDate=\"\".concat(current.getDate(),\"/\").concat(current.getMonth()+1,\"/\").concat(current.getFullYear());var formattedDate=format(bookingTime,\"dd/M/yyyy\");var formattedTime=format(bookingTime,\"H:mm\");function deleteBooking(){return _deleteBooking.apply(this,arguments);}function _deleteBooking(){_deleteBooking=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var confirmDelete;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:/*When the cancel button is clicked it ask the user to confirm. If the user confirms \n    it send a post quest to the php file with the user id and the booking id */confirmDelete=window.confirm(\"Vil du annullere bookingen hos \".concat(booking.resName,\" d. \").concat(formattedDate,\" kl. \").concat(formattedTime,\"?\"));if(confirmDelete){axios.post(DELETE_URL,JSON.stringify({userId:userId,bookingId:bookingId})).then(function(result){if(result.data.status==\"invalid\"){//If the request is invalid, tells the error in an alert\nalert(result.data.errorMessage);}else{//If the request is good, it tells the user that the booking is cancel and reload the page\nwindow.location.reload();alert(\"Bookingen Annulleret\");}});}case 2:case\"end\":return _context.stop();}}},_callee);}));return _deleteBooking.apply(this,arguments);}function deleteOldBooking(){return _deleteOldBooking.apply(this,arguments);}function _deleteOldBooking(){_deleteOldBooking=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var confirmDelete;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:/* When the delete button is clicked, it ask the user to confirm and if it is confirmed, \n    it send a post request to the php file with the user id and the booking id */confirmDelete=window.confirm(\"Vil du slette bookingen hos \".concat(booking.resName,\" d. \").concat(formattedDate,\" kl. \").concat(formattedTime,\"?\"));if(confirmDelete){axios.post(DELETE_URL,JSON.stringify({userId:userId,bookingId:bookingId})).then(function(result){if(result.data.status==\"invalid\"){//If the request is invalid, it tells the user in an alert\nalert(result.data.errorMessage);}else{//If the request is good, it tells the user in an alert and reloads the page\nwindow.location.reload();alert(\"Bookingen slettet\");}});}case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _deleteOldBooking.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"article\",{className:\"BookingCard\",children:[/*#__PURE__*/_jsx(\"img\",{src:booking.img,alt:booking.resName}),/*#__PURE__*/_jsxs(\"div\",{className:\"TextContainer\",children:[/*#__PURE__*/_jsx(\"h2\",{children:booking.resName}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Dato: \",formattedDate]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Kl.: \",formattedTime]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Antal personer: \",booking.numbOfPeople]}),formattedDate>=currentDate?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-delete\",onClick:deleteBooking,children:\"Annuller booking\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-delete\",onClick:deleteOldBooking,children:\"Slet\"})]})]});}","map":{"version":3,"names":["React","useRef","useState","useEffect","format","axios","BookingCard","booking","userId","localStorage","getItem","DELETE_URL","bookingId","id","dateTime","date","time","bookingTime","Date","current","currentDate","getDate","getMonth","getFullYear","formattedDate","formattedTime","deleteBooking","confirmDelete","window","confirm","resName","post","JSON","stringify","then","result","data","status","alert","errorMessage","location","reload","deleteOldBooking","img","numbOfPeople"],"sources":["/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/src/components/BookingCard.js"],"sourcesContent":["import React from \"react\";\nimport { useRef, useState, useEffect } from \"react\";\nimport { format } from \"date-fns\";\nimport axios from \"../api/axios\";\n\nexport default function BookingCard({ booking }) {\n  //Gets the user id from localStorage\n  const userId = localStorage.getItem(\"userId\");\n  //The url to the php file that deletes bookings\n  const DELETE_URL = \"https://skole.mortengh.dk/PHP/deleteBooking.php\";\n  const bookingId = booking.id;\n  const dateTime = booking.date + \"T\" + booking.time;\n  const bookingTime = new Date(dateTime);\n  const current = new Date();\n  const currentDate = `${current.getDate()}/${\n    current.getMonth() + 1\n  }/${current.getFullYear()}`;\n  let formattedDate = format(bookingTime, \"dd/M/yyyy\");\n  let formattedTime = format(bookingTime, \"H:mm\");\n\n  async function deleteBooking() {\n    /*When the cancel button is clicked it ask the user to confirm. If the user confirms \n    it send a post quest to the php file with the user id and the booking id */\n    const confirmDelete = window.confirm(\n      `Vil du annullere bookingen hos ${booking.resName} d. ${formattedDate} kl. ${formattedTime}?`\n    );\n    if (confirmDelete) {\n      axios\n        .post(\n          DELETE_URL,\n          JSON.stringify({\n            userId,\n            bookingId,\n          })\n        )\n        .then((result) => {\n          if (result.data.status == \"invalid\") {\n            //If the request is invalid, tells the error in an alert\n            alert(result.data.errorMessage);\n          } else {\n            //If the request is good, it tells the user that the booking is cancel and reload the page\n            window.location.reload();\n            alert(\"Bookingen Annulleret\");\n          }\n        });\n    }\n  }\n  async function deleteOldBooking() {\n    /* When the delete button is clicked, it ask the user to confirm and if it is confirmed, \n    it send a post request to the php file with the user id and the booking id */\n    const confirmDelete = window.confirm(\n      `Vil du slette bookingen hos ${booking.resName} d. ${formattedDate} kl. ${formattedTime}?`\n    );\n    if (confirmDelete) {\n      axios\n        .post(\n          DELETE_URL,\n          JSON.stringify({\n            userId,\n            bookingId,\n          })\n        )\n        .then((result) => {\n          if (result.data.status == \"invalid\") {\n            //If the request is invalid, it tells the user in an alert\n            alert(result.data.errorMessage);\n          } else {\n            //If the request is good, it tells the user in an alert and reloads the page\n            window.location.reload();\n            alert(\"Bookingen slettet\");\n          }\n        });\n    }\n  }\n\n  return (\n    <article className=\"BookingCard\">\n      <img src={booking.img} alt={booking.resName} />\n      <div className=\"TextContainer\">\n        <h2>{booking.resName}</h2>\n        <p>Dato: {formattedDate}</p>\n        <p>Kl.: {formattedTime}</p>\n        <p>Antal personer: {booking.numbOfPeople}</p>\n        {formattedDate >= currentDate ? (\n          <button className=\"btn btn-delete\" onClick={deleteBooking}>\n            Annuller booking\n          </button>\n        ) : (\n          <button className=\"btn btn-delete\" onClick={deleteOldBooking}>\n            Slet\n          </button>\n        )}\n      </div>\n    </article>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}