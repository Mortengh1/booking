{"ast":null,"code":"var _jsxFileName = \"/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/src/pages/Login.js\";\nimport { useState, useEffect } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport \"../App.css\";\nimport $ from 'jquery';\nimport parse from 'html-react-parser';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  var _s = $RefreshSig$();\n  function LoginFunc() {\n    _s();\n    const navigate = useNavigate();\n    const initialValues = {\n      firstname: \"\",\n      lastname: \"\",\n      mail: \"\",\n      age: \"\",\n      phonenr: \"\",\n      pwd: \"\",\n      resite: \"\"\n    };\n    const [loginValues, setLoginValues] = useState(initialValues);\n    const [loginErrors, setLoginErrors] = useState({});\n    const [isSubmit, setIsSubmit] = useState(false);\n    const [result, setResult] = useState(\"\");\n    const [loading, setLoading] = useState(true);\n\n    // useEffect(()=>{\n    //     loadData()\n    // }, [])\n\n    // const loadData = () =>{\n    //     fetch(\"http://localhost:8000/login.php\", {\n    //         method: \"POST\",\n    //         headers:{\n    //             'Accept':'application/json',\n    //             'Contact-type':'application/json',\n    //         },\n    //         body:JSON.stringify(data)\n    //     }).then((response)=>{\n    //         console.warn('Response', response);\n    //     })\n\n    // }\n\n    const handleChange = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      setLoginValues({\n        ...loginValues,\n        [name]: value\n      });\n      console.log(loginValues);\n    };\n    const handleSumbit = e => {\n      e.preventDefault();\n      const form = $(e.target);\n      $.ajax({\n        type: \"POST\",\n        url: form.attr(\"action\"),\n        data: form.serialize(),\n        success(data) {\n          setResult(data);\n          setLoading(false);\n        }\n      });\n      // loadData();\n      setLoginErrors(validatelogin(loginValues));\n      setIsSubmit(true);\n    };\n    useEffect(() => {\n      console.log(loginErrors);\n      if (Object.keys(loginErrors).length === 0 && isSubmit) {\n        console.log(loginValues);\n      }\n    }, [loginErrors]);\n    const validatelogin = values => {\n      const errors = {};\n      const regex = /^\\S+@\\S+\\.\\S+$/;\n      if (!values.mail) {\n        errors.mail = \"E-mail skal udfyldes\";\n      } else if (!regex.test(values.mail)) {\n        errors.mail = \"E-mail er ikke gyldig\";\n      }\n      if (!values.pwd) {\n        errors.pwd = \"Kodeord skal udfyldes\";\n      }\n      return errors;\n    };\n    function LoggedInUser() {\n      result.map(user => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"User id: \", user.user_id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"User login: \", user.user_login]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this)]\n        }, user.user_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 15\n        }, this);\n      });\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [Object.keys(loginErrors).length === 0 && loading === false && Object.keys(result).length === 0 && isSubmit ? navigate('/login') : [], /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"LoginContainer\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"LoginForm\",\n          action: \"http://localhost:8000/login.php\",\n          method: \"post\",\n          onSubmit: event => handleSumbit(event),\n          children: [Object.keys(loginErrors).length === 0 && result ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: parse(result)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 74\n          }, this) : [], /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"E-mail\",\n              type: \"text\",\n              id: \"mail\",\n              name: \"mail\",\n              value: loginValues.mail,\n              onChange: event => handleChange(event)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"FormError\",\n              children: loginErrors.mail\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"Kodeord\",\n              type: \"password\",\n              id: \"pwd\",\n              name: \"pwd\",\n              value: loginValues.pwd,\n              onChange: event => handleChange(event)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"FormError\",\n              children: loginErrors.pwd\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Log ind\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this);\n  }\n  _s(LoginFunc, \"VW5TboiR/e7B2FcqHrV0PGv6qk8=\", false, function () {\n    return [useNavigate];\n  });\n  return LoginFunc();\n};\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","useEffect","useNavigate","$","parse","Login","LoginFunc","navigate","initialValues","firstname","lastname","mail","age","phonenr","pwd","resite","loginValues","setLoginValues","loginErrors","setLoginErrors","isSubmit","setIsSubmit","result","setResult","loading","setLoading","handleChange","e","name","value","target","console","log","handleSumbit","preventDefault","form","ajax","type","url","attr","data","serialize","success","validatelogin","Object","keys","length","values","errors","regex","test","LoggedInUser","map","user","user_id","user_login","event"],"sources":["/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/src/pages/Login.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport {useNavigate} from 'react-router-dom';\nimport \"../App.css\";\nimport $ from 'jquery';\nimport parse from 'html-react-parser';\n\nconst Login = () => {\n  \n    function LoginFunc() {\n      const navigate = useNavigate();\n      const initialValues = {firstname: \"\", lastname: \"\", mail: \"\", age: \"\", phonenr: \"\", pwd: \"\", resite: \"\"};\n      const [loginValues, setLoginValues] = useState(initialValues);\n      const [loginErrors, setLoginErrors] = useState({});\n      const [isSubmit, setIsSubmit] = useState(false);\n      const [result, setResult] = useState(\"\");\n      const [loading, setLoading] = useState(true);\n    \n        // useEffect(()=>{\n        //     loadData()\n        // }, [])\n    \n        // const loadData = () =>{\n        //     fetch(\"http://localhost:8000/login.php\", {\n        //         method: \"POST\",\n        //         headers:{\n        //             'Accept':'application/json',\n        //             'Contact-type':'application/json',\n        //         },\n        //         body:JSON.stringify(data)\n        //     }).then((response)=>{\n        //         console.warn('Response', response);\n        //     })\n    \n        // }\n    \n        const handleChange = (e) => {\n          const {name, value} = e.target;\n          setLoginValues({ ...loginValues, [name]: value});\n           console.log(loginValues);\n        };\n     \n      \n        const handleSumbit = (e) => {\n            e.preventDefault();\n            const form = $(e.target);\n    \n            $.ajax({\n                type: \"POST\",\n                url: form.attr(\"action\"),\n                data: form.serialize(),\n                success(data){\n                    setResult(data);\n                    setLoading(false);\n                },\n            });\n            // loadData();\n            setLoginErrors(validatelogin(loginValues));\n            setIsSubmit(true);\n            \n        };\n    \n        useEffect(()=> {\n            console.log(loginErrors);\n            if(Object.keys(loginErrors).length === 0 && isSubmit){\n                console.log(loginValues);\n            }\n        },[loginErrors]);\n    \n        const validatelogin = (values) => {\n            const errors = {};\n            const regex = /^\\S+@\\S+\\.\\S+$/;\n            if(!values.mail){\n                errors.mail = \"E-mail skal udfyldes\";\n            }else if(!regex.test(values.mail)){\n                errors.mail = \"E-mail er ikke gyldig\";\n            }\n            if(!values.pwd){\n                errors.pwd = \"Kodeord skal udfyldes\";\n            }\n            return errors;\n        }\n        function LoggedInUser(){\n          result.map(user => {\n            return(\n              <div className=\"user\" key={user.user_id}>\n                <p>User id: {user.user_id}</p>\n                <p>User login: {user.user_login}</p>\n              </div>\n            )\n          })\n        }\n      \n        \n    \n        return (\n    \n            <div className=\"App\">\n                {Object.keys(loginErrors).length === 0 && loading === false && Object.keys(result).length === 0 && isSubmit ? (navigate('/login')) : ([])}\n                <h1>Login</h1>\n                <div className=\"LoginContainer\">\n                <form\n                    className=\"LoginForm\"\n                    action=\"http://localhost:8000/login.php\"\n                    method=\"post\"\n                    onSubmit={(event) => handleSumbit(event)}\n                >\n                    {Object.keys(loginErrors).length === 0 && result ?  (<div>{parse(result)}</div>) : ([])}\n                    <div>\n                    <input placeholder=\"E-mail\" type=\"text\" id=\"mail\" name=\"mail\" value={loginValues.mail} onChange={(event) => handleChange(event)} />\n                    <p className=\"FormError\">{loginErrors.mail}</p>\n                    </div>\n                    <div>\n                    <input placeholder=\"Kodeord\" type=\"password\" id=\"pwd\" name=\"pwd\" value={loginValues.pwd} onChange={(event) => handleChange(event)} />\n                    <p className=\"FormError\">{loginErrors.pwd}</p>\n                    </div>\n                    <button type=\"submit\">Log ind</button>\n                </form>\n                </div>\n                <h1></h1>\n            </div>\n        );\n    }\n    \n    return LoginFunc();\n  }\n  export default Login;\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAAQC,WAAW,QAAO,kBAAkB;AAC5C,OAAO,YAAY;AACnB,OAAOC,CAAC,MAAM,QAAQ;AACtB,OAAOC,KAAK,MAAM,mBAAmB;AAAC;AAEtC,MAAMC,KAAK,GAAG,MAAM;EAAA;EAEhB,SAASC,SAAS,GAAG;IAAA;IACnB,MAAMC,QAAQ,GAAGL,WAAW,EAAE;IAC9B,MAAMM,aAAa,GAAG;MAACC,SAAS,EAAE,EAAE;MAAEC,QAAQ,EAAE,EAAE;MAAEC,IAAI,EAAE,EAAE;MAAEC,GAAG,EAAE,EAAE;MAAEC,OAAO,EAAE,EAAE;MAAEC,GAAG,EAAE,EAAE;MAAEC,MAAM,EAAE;IAAE,CAAC;IACxG,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGjB,QAAQ,CAACQ,aAAa,CAAC;IAC7D,MAAM,CAACU,WAAW,EAAEC,cAAc,CAAC,GAAGnB,QAAQ,CAAC,CAAC,CAAC,CAAC;IAClD,MAAM,CAACoB,QAAQ,EAAEC,WAAW,CAAC,GAAGrB,QAAQ,CAAC,KAAK,CAAC;IAC/C,MAAM,CAACsB,MAAM,EAAEC,SAAS,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;IACxC,MAAM,CAACwB,OAAO,EAAEC,UAAU,CAAC,GAAGzB,QAAQ,CAAC,IAAI,CAAC;;IAE1C;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;;IAEA,MAAM0B,YAAY,GAAIC,CAAC,IAAK;MAC1B,MAAM;QAACC,IAAI;QAAEC;MAAK,CAAC,GAAGF,CAAC,CAACG,MAAM;MAC9Bb,cAAc,CAAC;QAAE,GAAGD,WAAW;QAAE,CAACY,IAAI,GAAGC;MAAK,CAAC,CAAC;MAC/CE,OAAO,CAACC,GAAG,CAAChB,WAAW,CAAC;IAC3B,CAAC;IAGD,MAAMiB,YAAY,GAAIN,CAAC,IAAK;MACxBA,CAAC,CAACO,cAAc,EAAE;MAClB,MAAMC,IAAI,GAAGhC,CAAC,CAACwB,CAAC,CAACG,MAAM,CAAC;MAExB3B,CAAC,CAACiC,IAAI,CAAC;QACHC,IAAI,EAAE,MAAM;QACZC,GAAG,EAAEH,IAAI,CAACI,IAAI,CAAC,QAAQ,CAAC;QACxBC,IAAI,EAAEL,IAAI,CAACM,SAAS,EAAE;QACtBC,OAAO,CAACF,IAAI,EAAC;UACTjB,SAAS,CAACiB,IAAI,CAAC;UACff,UAAU,CAAC,KAAK,CAAC;QACrB;MACJ,CAAC,CAAC;MACF;MACAN,cAAc,CAACwB,aAAa,CAAC3B,WAAW,CAAC,CAAC;MAC1CK,WAAW,CAAC,IAAI,CAAC;IAErB,CAAC;IAEDpB,SAAS,CAAC,MAAK;MACX8B,OAAO,CAACC,GAAG,CAACd,WAAW,CAAC;MACxB,IAAG0B,MAAM,CAACC,IAAI,CAAC3B,WAAW,CAAC,CAAC4B,MAAM,KAAK,CAAC,IAAI1B,QAAQ,EAAC;QACjDW,OAAO,CAACC,GAAG,CAAChB,WAAW,CAAC;MAC5B;IACJ,CAAC,EAAC,CAACE,WAAW,CAAC,CAAC;IAEhB,MAAMyB,aAAa,GAAII,MAAM,IAAK;MAC9B,MAAMC,MAAM,GAAG,CAAC,CAAC;MACjB,MAAMC,KAAK,GAAG,gBAAgB;MAC9B,IAAG,CAACF,MAAM,CAACpC,IAAI,EAAC;QACZqC,MAAM,CAACrC,IAAI,GAAG,sBAAsB;MACxC,CAAC,MAAK,IAAG,CAACsC,KAAK,CAACC,IAAI,CAACH,MAAM,CAACpC,IAAI,CAAC,EAAC;QAC9BqC,MAAM,CAACrC,IAAI,GAAG,uBAAuB;MACzC;MACA,IAAG,CAACoC,MAAM,CAACjC,GAAG,EAAC;QACXkC,MAAM,CAAClC,GAAG,GAAG,uBAAuB;MACxC;MACA,OAAOkC,MAAM;IACjB,CAAC;IACD,SAASG,YAAY,GAAE;MACrB7B,MAAM,CAAC8B,GAAG,CAACC,IAAI,IAAI;QACjB,oBACE;UAAK,SAAS,EAAC,MAAM;UAAA,wBACnB;YAAA,wBAAaA,IAAI,CAACC,OAAO;UAAA;YAAA;YAAA;YAAA;UAAA,QAAK,eAC9B;YAAA,2BAAgBD,IAAI,CAACE,UAAU;UAAA;YAAA;YAAA;YAAA;UAAA,QAAK;QAAA,GAFXF,IAAI,CAACC,OAAO;UAAA;UAAA;UAAA;QAAA,QAGjC;MAEV,CAAC,CAAC;IACJ;IAIA,oBAEI;MAAK,SAAS,EAAC,KAAK;MAAA,WACfV,MAAM,CAACC,IAAI,CAAC3B,WAAW,CAAC,CAAC4B,MAAM,KAAK,CAAC,IAAItB,OAAO,KAAK,KAAK,IAAIoB,MAAM,CAACC,IAAI,CAACvB,MAAM,CAAC,CAACwB,MAAM,KAAK,CAAC,IAAI1B,QAAQ,GAAIb,QAAQ,CAAC,QAAQ,CAAC,GAAK,EAAG,eACzI;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAc,eACd;QAAK,SAAS,EAAC,gBAAgB;QAAA,uBAC/B;UACI,SAAS,EAAC,WAAW;UACrB,MAAM,EAAC,iCAAiC;UACxC,MAAM,EAAC,MAAM;UACb,QAAQ,EAAGiD,KAAK,IAAKvB,YAAY,CAACuB,KAAK,CAAE;UAAA,WAExCZ,MAAM,CAACC,IAAI,CAAC3B,WAAW,CAAC,CAAC4B,MAAM,KAAK,CAAC,IAAIxB,MAAM,gBAAK;YAAA,UAAMlB,KAAK,CAACkB,MAAM;UAAC;YAAA;YAAA;YAAA;UAAA,QAAO,GAAK,EAAG,eACvF;YAAA,wBACA;cAAO,WAAW,EAAC,QAAQ;cAAC,IAAI,EAAC,MAAM;cAAC,EAAE,EAAC,MAAM;cAAC,IAAI,EAAC,MAAM;cAAC,KAAK,EAAEN,WAAW,CAACL,IAAK;cAAC,QAAQ,EAAG6C,KAAK,IAAK9B,YAAY,CAAC8B,KAAK;YAAE;cAAA;cAAA;cAAA;YAAA,QAAG,eACnI;cAAG,SAAS,EAAC,WAAW;cAAA,UAAEtC,WAAW,CAACP;YAAI;cAAA;cAAA;cAAA;YAAA,QAAK;UAAA;YAAA;YAAA;YAAA;UAAA,QACzC,eACN;YAAA,wBACA;cAAO,WAAW,EAAC,SAAS;cAAC,IAAI,EAAC,UAAU;cAAC,EAAE,EAAC,KAAK;cAAC,IAAI,EAAC,KAAK;cAAC,KAAK,EAAEK,WAAW,CAACF,GAAI;cAAC,QAAQ,EAAG0C,KAAK,IAAK9B,YAAY,CAAC8B,KAAK;YAAE;cAAA;cAAA;cAAA;YAAA,QAAG,eACrI;cAAG,SAAS,EAAC,WAAW;cAAA,UAAEtC,WAAW,CAACJ;YAAG;cAAA;cAAA;cAAA;YAAA,QAAK;UAAA;YAAA;YAAA;YAAA;UAAA,QACxC,eACN;YAAQ,IAAI,EAAC,QAAQ;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAAiB;QAAA;UAAA;UAAA;UAAA;QAAA;MACnC;QAAA;QAAA;QAAA;MAAA,QACD,eACN;QAAA;QAAA;QAAA;MAAA,QAAS;IAAA;MAAA;MAAA;MAAA;IAAA,QACP;EAEd;EAAC,GAjHQR,SAAS;IAAA,QACCJ,WAAW;EAAA;EAkH9B,OAAOI,SAAS,EAAE;AACpB,CAAC;AAAA,KAtHGD,KAAK;AAuHT,eAAeA,KAAK;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}