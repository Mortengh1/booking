{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import Popup from\"reactjs-popup\";import{useRef,useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from\"../api/axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function RestaurantCard(_ref){var restaurant=_ref.restaurant;var userId=localStorage.getItem(\"userId\");var BOOKING_URL=\"https://skole.mortengh.dk/PHP/booking.php\";var navigate=useNavigate();var userRef=useRef();var errRef=useRef();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var closeModal=function closeModal(){return setOpen(false);};var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),howMany=_useState4[0],setHowMany=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),date=_useState6[0],setDate=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),time=_useState8[0],setTime=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),errMsg=_useState10[0],setErrMsg=_useState10[1];useEffect(function(){setErrMsg(\"\");},[howMany,date,time]);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();axios.post(BOOKING_URL,JSON.stringify({howMany:howMany,date:date,time:time,restaurantID:restaurant.id,usersID:userId})).then(function(result){// console.log(result.data);\nif(result.data.status==\"invalid\"){setErrMsg(result.data.errorMessage);}else{setHowMany(\"\");setDate(\"\");setTime(\"\");navigate(\"/Bookings\");}});case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"article\",{className:\"RestaurantCard\",children:[/*#__PURE__*/_jsx(\"img\",{src:restaurant.img,alt:restaurant.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"TextContainer\",children:[/*#__PURE__*/_jsx(\"h2\",{children:restaurant.resName}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Adresse: \",restaurant.resAddress,\", \",restaurant.postnr,\" \",restaurant.city]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Kapacitet: \",restaurant.capacity]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn\",onClick:function onClick(){return setOpen(function(o){return!o;});},children:[\" \",\"Se Restaurant\"]}),/*#__PURE__*/_jsx(Popup,{position:\"right center\",open:open,closeOnDocumentClick:true,onClose:closeModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"BookingPopup\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"PopupHeader\",children:[/*#__PURE__*/_jsx(\"h2\",{children:restaurant.resName}),/*#__PURE__*/_jsx(\"a\",{className:\"close\",onClick:closeModal,children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"img\",{src:restaurant.img,alt:restaurant.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"PopupContent\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Adresse: \",restaurant.resAddress]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Kapacitet: \",restaurant.capacity]}),/*#__PURE__*/_jsxs(\"div\",{className:\"BookingForm\",children:[/*#__PURE__*/_jsx(\"p\",{ref:errRef,className:errMsg?\"ErrorMessage\":\"offScreen\",\"aria-live\":\"assertive\",children:errMsg}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"Field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"howMany\",children:\"Hvor mange?\"}),/*#__PURE__*/_jsx(\"input\",{name:\"howMany\",type:\"number\",onChange:function onChange(e){return setHowMany(e.currentTarget.value);},value:howMany,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",children:\"Dato:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"date\",type:\"date\",onChange:function onChange(e){return setDate(e.currentTarget.value);},value:date,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"time\",children:\"Tid:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"time\",type:\"time\",step:\"3600\",min:\"08:00\",max:\"21:00\",onChange:function onChange(e){return setTime(e.currentTarget.value);},value:time,required:true})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",children:\"Book\"})]})]})]})]})})]})]});}","map":{"version":3,"names":["React","Popup","useRef","useState","useEffect","useNavigate","axios","RestaurantCard","restaurant","userId","localStorage","getItem","BOOKING_URL","navigate","userRef","errRef","open","setOpen","closeModal","howMany","setHowMany","date","setDate","time","setTime","errMsg","setErrMsg","handleSubmit","e","preventDefault","post","JSON","stringify","restaurantID","id","usersID","then","result","data","status","errorMessage","img","title","resName","resAddress","postnr","city","capacity","o","currentTarget","value"],"sources":["/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/src/components/RestaurantCard.js"],"sourcesContent":["import React from \"react\";\nimport Popup from \"reactjs-popup\";\nimport { useRef, useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"../api/axios\";\n\nexport default function RestaurantCard({ restaurant }) {\n  const userId = localStorage.getItem(\"userId\");\n  const BOOKING_URL = \"https://skole.mortengh.dk/PHP/booking.php\";\n  const navigate = useNavigate();\n  const userRef = useRef();\n  const errRef = useRef();\n  const [open, setOpen] = useState(false);\n  const closeModal = () => setOpen(false);\n\n  const [howMany, setHowMany] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [time, setTime] = useState(\"\");\n  \n  const [errMsg, setErrMsg] = useState(\"\");\n\n  useEffect(() => {\n    setErrMsg(\"\");\n  }, [howMany, date, time]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n   \n    axios\n      .post(\n        BOOKING_URL,\n        JSON.stringify({\n          howMany,\n          date,\n          time,\n          restaurantID: restaurant.id,\n          usersID: userId,\n        })\n      )\n      .then((result) => {\n        // console.log(result.data);\n        if (result.data.status == \"invalid\") {\n          setErrMsg(result.data.errorMessage);\n        } else {\n          setHowMany(\"\");\n          setDate(\"\");\n          setTime(\"\");\n          navigate(\"/Bookings\");\n        }\n      });\n  };\n\n  return (\n    <article className=\"RestaurantCard\">\n      <img src={restaurant.img} alt={restaurant.title} />\n      <div className=\"TextContainer\">\n        <h2>{restaurant.resName}</h2>\n        <p>\n          Adresse: {restaurant.resAddress}, {restaurant.postnr}{\" \"}\n          {restaurant.city}\n        </p>\n        <p>Kapacitet: {restaurant.capacity}</p>\n        <button className=\"btn\" onClick={() => setOpen((o) => !o)}>\n          {\" \"}\n          Se Restaurant\n        </button>\n        <Popup\n          position=\"right center\"\n          open={open}\n          closeOnDocumentClick\n          onClose={closeModal}\n        >\n          <div className=\"BookingPopup\">\n            <div className=\"PopupHeader\">\n              <h2>{restaurant.resName}</h2>\n              <a className=\"close\" onClick={closeModal}>\n                &times;\n              </a>\n            </div>\n            <img src={restaurant.img} alt={restaurant.title} />\n            <div className=\"PopupContent\">\n              <p>Adresse: {restaurant.resAddress}</p>\n              <p>Kapacitet: {restaurant.capacity}</p>\n              <div className=\"BookingForm\">\n                <p\n                  ref={errRef}\n                  className={errMsg ? \"ErrorMessage\" : \"offScreen\"}\n                  aria-live=\"assertive\"\n                >\n                  {errMsg}\n                </p>\n                <form onSubmit={handleSubmit}>\n                  <div className=\"Field\">\n                    <label htmlFor=\"howMany\">Hvor mange?</label>\n                    <input\n                      name=\"howMany\"\n                      type=\"number\"\n                      onChange={(e) => setHowMany(e.currentTarget.value)}\n                      value={howMany}\n                      required\n                    />\n                  </div>\n                  <div className=\"Field\">\n                    <label htmlFor=\"date\">Dato:</label>\n                    <input\n                      name=\"date\"\n                      type=\"date\"\n                      onChange={(e) => setDate(e.currentTarget.value)}\n                      value={date}\n                      required\n                    />\n                  </div>\n                  <div className=\"Field\">\n                    <label htmlFor=\"time\">Tid:</label>\n                    <input\n                      name=\"time\"\n                      type=\"time\"\n                      step=\"3600\"\n                      min=\"08:00\"\n                      max=\"21:00\"\n                      onChange={(e) => setTime(e.currentTarget.value)}\n                      value={time}\n                      required\n                    />\n                  </div>\n\n                  <button className=\"btn\">Book</button>\n                </form>\n              </div>\n            </div>\n          </div>\n        </Popup>\n      </div>\n    </article>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}