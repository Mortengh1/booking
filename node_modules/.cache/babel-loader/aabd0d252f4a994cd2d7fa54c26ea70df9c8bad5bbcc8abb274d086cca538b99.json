{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useEffect,useState}from\"react\";import RestaurantCard from\"../components/RestaurantCard\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Home=function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),restaurants=_useState2[0],setRestaurants=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchCity=_useState4[0],setSearchCity=_useState4[1];useEffect(function(){/* Gets the restaurants from the database.\n    It takes the value from the search input field and sends it with the url so we can use GET \n    to filter the query  */function getRestaurants(){return _getRestaurants.apply(this,arguments);}function _getRestaurants(){_getRestaurants=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,response,data,restaurantssArray;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"https://skole.mortengh.dk/PHP/restaurants.php?city=\".concat(searchCity);_context.next=3;return fetch(url);case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;restaurantssArray=Object.keys(data).map(function(key){return _objectSpread({key:key},data[key]);});// from object to array\nsetRestaurants(restaurantssArray);case 9:case\"end\":return _context.stop();}}},_callee);}));return _getRestaurants.apply(this,arguments);}getRestaurants();//Each time searchCity is changed, it runs the useEffect again\n},[searchCity]);//Sets the searchCity state to the value of the search field\nvar handleChange=function handleChange(e){setSearchCity(e.target.value);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"Filters\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"searchbar\",children:\"S\\xF8g efter By: \"}),/*#__PURE__*/_jsx(\"input\",{name:\"searchbar\",type:\"search\",value:searchCity,onChange:function onChange(event){return handleChange(event);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"RestaurantGrid\",children:restaurants.map(function(restaurant){return/*#__PURE__*/_jsx(RestaurantCard,{restaurant:restaurant},restaurant.key);})})]});};export default Home;","map":{"version":3,"names":["React","useEffect","useState","RestaurantCard","Home","restaurants","setRestaurants","searchCity","setSearchCity","getRestaurants","url","fetch","response","json","data","restaurantssArray","Object","keys","map","key","handleChange","e","target","value","event","restaurant"],"sources":["/Users/mortengedstedhansen/Documents/Skole/Eksamen 1/booking/src/pages/Home.js"],"sourcesContent":["import React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport RestaurantCard from \"../components/RestaurantCard\";\n\nconst Home = () => {\n  const [restaurants, setRestaurants] = useState([]);\n  const [searchCity, setSearchCity] = useState(\"\");\n\n  useEffect(() => {\n    /* Gets the restaurants from the database.\n    It takes the value from the search input field and sends it with the url so we can use GET \n    to filter the query  */\n    async function getRestaurants() {\n      const url = `https://skole.mortengh.dk/PHP/restaurants.php?city=${searchCity}`;\n      const response = await fetch(url);\n      const data = await response.json();\n      const restaurantssArray = Object.keys(data).map((key) => ({\n        key: key,\n        ...data[key],\n      })); // from object to array\n      setRestaurants(restaurantssArray);\n    }\n    getRestaurants();\n    //Each time searchCity is changed, it runs the useEffect again\n  }, [searchCity]);\n\n  //Sets the searchCity state to the value of the search field\n  const handleChange = (e) => {\n    setSearchCity(e.target.value);\n  };\n\n  return (\n    <>\n      <div className=\"Filters\">\n        <label htmlFor=\"searchbar\">SÃ¸g efter By: </label>\n        <input\n          name=\"searchbar\"\n          type=\"search\"\n          value={searchCity}\n          onChange={(event) => handleChange(event)}\n        />\n      </div>\n      <div className=\"RestaurantGrid\">\n        {restaurants.map((restaurant) => {\n          return (\n            <RestaurantCard restaurant={restaurant} key={restaurant.key} />\n          );\n        })}\n      </div>\n    </>\n  );\n};\n\nexport default Home;\n"],"mappings":"ulBAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAOC,eAAc,KAAM,8BAA8B,CAAC,6IAE1D,GAAMC,KAAI,CAAG,QAAPA,KAAI,EAAS,CACjB,cAAsCF,QAAQ,CAAC,EAAE,CAAC,wCAA3CG,WAAW,eAAEC,cAAc,eAClC,eAAoCJ,QAAQ,CAAC,EAAE,CAAC,yCAAzCK,UAAU,eAAEC,aAAa,eAEhCP,SAAS,CAAC,UAAM,CACd;AACJ;AACA,2BAFI,QAGeQ,eAAc,sJAA7B,6KACQC,GAAG,8DAAyDH,UAAU,wBACrDI,MAAK,CAACD,GAAG,CAAC,QAA3BE,QAAQ,qCACKA,SAAQ,CAACC,IAAI,EAAE,QAA5BC,IAAI,eACJC,iBAAiB,CAAGC,MAAM,CAACC,IAAI,CAACH,IAAI,CAAC,CAACI,GAAG,CAAC,SAACC,GAAG,wBAClDA,GAAG,CAAEA,GAAG,EACLL,IAAI,CAACK,GAAG,CAAC,GACZ,CAAC,CAAE;AACLb,cAAc,CAACS,iBAAiB,CAAC,CAAC,sDACnC,iDACDN,cAAc,EAAE,CAChB;AACF,CAAC,CAAE,CAACF,UAAU,CAAC,CAAC,CAEhB;AACA,GAAMa,aAAY,CAAG,QAAfA,aAAY,CAAIC,CAAC,CAAK,CAC1Bb,aAAa,CAACa,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC/B,CAAC,CAED,mBACE,wCACE,aAAK,SAAS,CAAC,SAAS,wBACtB,cAAO,OAAO,CAAC,WAAW,+BAAuB,cACjD,cACE,IAAI,CAAC,WAAW,CAChB,IAAI,CAAC,QAAQ,CACb,KAAK,CAAEhB,UAAW,CAClB,QAAQ,CAAE,kBAACiB,KAAK,QAAKJ,aAAY,CAACI,KAAK,CAAC,EAAC,EACzC,GACE,cACN,YAAK,SAAS,CAAC,gBAAgB,UAC5BnB,WAAW,CAACa,GAAG,CAAC,SAACO,UAAU,CAAK,CAC/B,mBACE,KAAC,cAAc,EAAC,UAAU,CAAEA,UAAW,EAAMA,UAAU,CAACN,GAAG,CAAI,CAEnE,CAAC,CAAC,EACE,GACL,CAEP,CAAC,CAED,cAAef,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}